k = int(raw_input())

for kk in range(k):
    n = int(raw_input())
    users = ["" for nn in range(n)]
    for nn in range(n):
        users[nn] = raw_input().split(' ')

    m = int(raw_input())
    messages = [["", ""] for mm in range(m)]
    for mm in range(m):
        messages[mm] = raw_input().split(":")

    for mm in range(m):
        if messages[mm][0] == "?":
            sus = set([])
            if mm > 0:
                sus.insert(messages[mm-1][0])
            if mm < m-1:
                sus.insert(messages[mm+1][0])
            for nn in range(n):
                if users[nn] in messages[mm][1]:
                    sus.insert(users[nn])
            if len(sus) + 1 > len(users):
                print "Impossible"
            else:
                pass
                
